---
title: 属性指令
date: 2018-1-31
tags: angular
---

{%note primary%}跟上一篇的有些类似,权当复习了{%endnote%}

首先angular中有三种指令:

 	1. 组件型,拥有模板的
 	2. 结构型 类似: `*ngIf`  添加或移除dom 改变布局
 	3. 属性指令

现在来创建一个属性型指令

1. `@Directive` 控制器类,注入ElementRef(可以访问dom)  input 传递绑定的数据

   ```typescript
   import {Directive,ElementRef,Input,HostListener} from '@angular/core';

   @Directive({
     selector:'[myhighlight]',//注意选择器类似于熟悉选择器 []抱着的字符串
   })

   export class HighlightDirective{
     constructor(
       el:ElementRef	//elementRef是一个服务
     ){}
     @Input('mycolor') color:string   //color为起的别名
     @HostListener('mouseover') onMouseOver(){ //hostlistener 绑定事件
       this.hilightColor('yellow')
     }
     @HostListener('mouseleave') onMouseLeave(){
       this.hilightColor('black')
     }
     private hilightColor(color){
       this.el.nativeElement.style.color=color
     }
   }
   ```

2. 记得在module中声明指令

3. 绑定事件 `@HostListener` 后面紧跟函数






